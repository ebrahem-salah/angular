<p-toast position="top-center" />
<p-confirmDialog />

<div class="admin-page">
  <div class="card">
    <p-card
      header="Orders"
      subheader="List of all Orders"
      subheader="Total Orders : {{ ordersCount() }}"
    >
      <!-- <h3>Total Orders :{{ ordersCount() }}</h3> -->
      <div class="p-grid">
        <div class="p-col-12">
          <div class="card">
            <p-table [value]="ordersList()">
              <ng-template pTemplate="header">
                <tr>
                  <th pSortableColumn="user">
                    UserName <p-sortIcon field="user" />
                  </th>
                  <th pSortableColumn="cartItems">
                    cartItems <p-sortIcon field="cartItems" />
                  </th>
                  <th pSortableColumn="paymentMethod">
                    paymentMethod <p-sortIcon field="paymentMethod" />
                  </th>
                  <th pSortableColumn="isPaid">
                    isPaid <p-sortIcon field="isPaid" />
                  </th>
                  <th pSortableColumn="isDelivered">
                    isDelivered <p-sortIcon field="isDelivered" />
                  </th>
                  <th pSortableColumn="paidAt">
                    paidAt <p-sortIcon field="paidAt" />
                  </th>

                  <th>Action</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-orders>
                <tr>
                  <td>{{ orders.user?.name }}</td>
                  <td>
                    {{ orders?.totalOrderPrice | currency : " EG" }}
                  </td>
                  <td>{{ orders.paymentMethod }}</td>
                  <td>
                    @if (orders?.isPaid ) {
                    <i class="pi pi-check" style="color: green"></i>
                    }@else {
                    <i class="pi pi-times" style="color: red"></i>
                    }
                  </td>
                  <td>
                    @if (orders?.isDelivered ) {
                    <i class="pi pi-check" style="color: green"></i>
                    }@else {
                    <i class="pi pi-times" style="color: red"></i>
                    }
                  </td>
                  <td>{{ orders.paidAt | date : "short" }}</td>

                  <td>
                    <p-button
                      styleClass="p-button-danger mr-3"
                      icon="pi pi-trash"
                      (click)="deleteorders(orders._id)"
                    ></p-button>
                    <p-button
                      styleClass="p-button-success"
                      icon="pi pi-eye"
                      routerLink="view/{{ orders._id }}"
                    ></p-button>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </p-card>
  </div>
</div>
