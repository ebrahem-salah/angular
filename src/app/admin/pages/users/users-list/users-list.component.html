<p-toast position="top-center" />
<p-confirmDialog />

<div class="admin-page">
  <div class="card">
    <p-card header="Users" subheader="List of all users">
      <!-- <div class="grid">
        <div class="col-12">
          <p-toolbar>
            <div class="p-toolbar-group-left">
              <p-button
                styleClass="p-button-success"
                label="New"
                icon="pi pi-plus"
                routerLink="form"
              ></p-button>
            </div>
          </p-toolbar>
        </div> -->
      <!-- </div> -->

      <div class="grid">
        <div class="col-12">
          <div class="card">
            <p-table
              [value]="users()"
              [paginator]="true"
              [rows]="5"
              [tableStyle]="{ 'min-width': '50rem' }"
              [rowsPerPageOptions]="[5, 10, 20]"
            >
              <ng-template pTemplate="header">
                <tr>
                  <th pSortableColumn="name">
                    Name <p-sortIcon field="name" />
                  </th>
                  <th pSortableColumn="profileImg">
                    ProfileImg <p-sortIcon field="profileImg" />
                  </th>
                  <th pSortableColumn="email">
                    Email <p-sortIcon field="email" />
                  </th>
                  <th pSortableColumn="phone">
                    Phone <p-sortIcon field="phone" />
                  </th>
                  <th pSortableColumn="role">
                    Role <p-sortIcon field="role" />
                  </th>
                  <th pSortableColumn="address">
                    Address <p-sortIcon field="address" />
                  </th>
                  <th pSortableColumn="active">
                    Active <p-sortIcon field="active" />
                  </th>
                  <th pSortableColumn="createdAt">
                    Created date<p-sortIcon field="createdAt" />
                  </th>
                  <th>Action</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-users>
                <tr>
                  <td>{{ users?.name }}</td>
                  <td>
                    <img
                      [src]="users?.profileImg"
                      [alt]="users?.name"
                      width="100"
                      class="shadow-4"
                    />
                  </td>
                  <td>{{ users?.email }}</td>
                  <td>{{ users?.phone }}</td>
                  <td>
                    {{ users?.role }}
                  </td>

                  <td>
                    {{ users?.addresses.address }}
                  </td>
                  <td>
                    @if (users?.active) {
                    <i class="pi pi-check" style="color: green"></i>
                    }@else {
                    <i class="pi pi-times" style="color: red"></i>
                    }
                  </td>
                  <td>{{ users?.createdAt | date : "short" }}</td>
                  <td>
                    <div
                      class="surface-0 flex align-items-center gap-1 justify-content-center py-1"
                    >
                      <p-button
                        styleClass="p-button-danger"
                        icon="pi pi-trash"
                        (click)="deleteUser(users._id)"
                      ></p-button>
                      <p-button
                        icon="pi pi-pencil"
                        rounded="true"
                        [style]="{ 'margin-right': '.5em' }"
                        routerLink="form/{{ users._id }}"
                      ></p-button>
                    </div>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </p-card>
  </div>
</div>
