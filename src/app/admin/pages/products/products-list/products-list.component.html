<p-toast position="top-center" />
<p-confirmDialog />

<div class="admin-page">
  <div class="card">
    <p-card header="Products" subheader="List of all products">
      <div class="p-grid">
        <div class="p-col-12">
          <p-toolbar>
            <div class="p-toolbar-group-left">
              <p-button
                styleClass="p-button-success"
                label="New"
                icon="pi pi-plus"
                routerLink="form"
              ></p-button>
            </div>
          </p-toolbar>
        </div>
      </div>

      <div class="p-grid">
        <div class="p-col-12">
          <div class="card">
            <p-table
              [value]="product()"
              [paginator]="true"
              [rows]="1"
              [tableStyle]="{ 'min-width': '50rem' }"
              [rowsPerPageOptions]="[5, 10, 20]"
            >
              <ng-template pTemplate="header">
                <tr>
                  <th pSortableColumn="title">
                    Name <p-sortIcon field="title" />
                  </th>
                  <th pSortableColumn="imageCover">
                    imageCover <p-sortIcon field="imageCover" />
                  </th>
                  <th pSortableColumn="price">
                    Price <p-sortIcon field="price" />
                  </th>
                  <th pSortableColumn="ratingsAverge">
                    Rating <p-sortIcon field="ratingsAverge" />
                  </th>
                  <th pSortableColumn="colors">
                    Colors <p-sortIcon field="colors" />
                  </th>
                  <th pSortableColumn="category.name">
                    Category <p-sortIcon field="category.name" />
                  </th>
                  <th pSortableColumn="quantity">
                    Quantity <p-sortIcon field="quantity" />
                  </th>
                  <th pSortableColumn="createdAt">
                    Created date<p-sortIcon field="createdAt" />
                  </th>
                  <th>Action</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-product>
                <tr>
                  <td>{{ product?.title }}</td>
                  <td>
                    <img
                      [src]="product?.imageCover"
                      [alt]="product?.title"
                      width="100"
                      class="shadow-4"
                    />
                  </td>
                  <td>{{ product?.price | currency : "EG" }}</td>
                  <td>
                    <!-- <p-rating
                      [(ngModel)]="product.ratingsAverge"
                      [readonly]="true"
                      [cancel]="false"
                    /> -->
                    <div
                      class="surface-0 flex align-items-center gap-2 justify-content-center py-1 px-2"
                      style="
                        border-radius: 30px;
                        box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.04),
                          0px 1px 2px 0px rgba(0, 0, 0, 0.06);
                      "
                    >
                      <span class="text-900 font-medium text-sm">{{
                        product.ratingsAverge
                      }}</span>
                      <i class="pi pi-star-fill text-yellow-500"></i>
                    </div>
                  </td>

                  <td [ngStyle]="{ color: product.colors }">
                    <i class="pi pi-circle-on" style="font-size: 2rem"></i>
                  </td>
                  <td>{{ product?.category.name }}</td>
                  <td>{{ product?.quantity }}</td>
                  <td>{{ product?.createdAt | date : "short" }}</td>
                  <td>
                    <div
                      class="surface-0 flex align-items-center gap-1 justify-content-center py-1"
                    >
                      <p-button
                        styleClass="p-button-danger"
                        icon="pi pi-trash"
                        (click)="deleteProduct(product._id)"
                      ></p-button>
                      <p-button
                        icon="pi pi-pencil"
                        rounded="true"
                        [style]="{ 'margin-right': '.5em' }"
                        routerLink="form/{{ product._id }}"
                      ></p-button>
                    </div>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
      </div>
    </p-card>
  </div>
</div>
