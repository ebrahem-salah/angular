<p-toast position="top-center" />

<!-- 
    <div [routerLink]="['/products/' + product()?._id]">
      
      <img
        class="image mb-2"
        ngOptimizedImage
        [src]="product()?.imageCover"
        [alt]="product()?.title"
        loading="lazy"
        width="160"
        height="160"
      />
      
      <h4 class="title">{{ product()?.title }}</h4>

      <div class="product-price">
        <span 
          class="original-price" 
          *ngIf="product()?.discountedPrice" 
          style="text-decoration: line-through;">
          {{ product()?.price | currency }}
        </span>
      
        <span class="discounted-price">
          {{ product()?.discountedPrice || product()?.price | currency }}
        </span>
      </div>
      
      <h5 class="discount">{{ product()?.discountedPrice| currency }}</h5>
      <h5 class="discount">{{ product()?.priceDiscount | currency }}</h5>
    </div>
    <div class="flex gap-2">
      <button
        class="btn btn-primary"
        (click)="addToCart()"
        [disabled]="product()!.quantity <= 0"
      >
        Add to cart <i class="pi pi-shopping-cart"></i>
      </button>
      <p-button icon="pi pi-heart" [outlined]="true" />
    </div>
  </div>
</div> -->

<div class="grid grid-nogutter justify-content-center">
  <div>
    <div class="col-12 sm:col-6 md:col-4 xl:col-6 p-2">
      <div
        class="p-2 border-1 surface-border surface-card border-round flex flex-column"
        style="min-height: 410px; transition: transform 0.3s"
        (mouseenter)="hover = true"
        (mouseleave)="hover = false"
        [ngStyle]="{ transform: hover ? 'scale(1.05)' : 'scale(1)' }"
      >
        <!-- صورة المنتج -->
        <div class="surface-50 flex justify-content-center border-round p-3">
          <div
            class="relative mx-auto"
            [routerLink]="['/products/' + product()?._id]"
          >
            <img
              class="border-round w-full"
              [src]="product()?.imageCover"
              alt="Product Image"
              style="max-width: 220px; cursor: pointer"
              loading="lazy"
            />
          </div>
        </div>

        <!-- تفاصيل المنتج -->
        <div class="pt-4 flex-grow-1">
          <div class="flex flex-row align-items-center gap-2">
            <div>
              <span class="font-medium text-secondary text-sm">{{
                product()?.category?.name
              }}</span>
              <div
                class="text-lg font-medium text-900 mt-1"
                style="
                  overflow: hidden;
                  display: -webkit-box;
                  -webkit-line-clamp: 2;
                  -webkit-box-orient: vertical;
                "
              >
                {{ product()?.title }}
              </div>
            </div>
            <div class="surface-100 p-1" style="border-radius: 30px">
              <div
                class="surface-0 flex align-items-center gap-2 justify-content-center py-1 px-2"
                style="
                  border-radius: 30px;
                  box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.04),
                    0px 1px 2px 0px rgba(0, 0, 0, 0.06);
                "
              >
                <span class="text-900 font-medium text-sm">{{
                  product()?.ratingsAverge
                }}</span>
                <i class="pi pi-star-fill text-yellow-500"></i>
              </div>
            </div>
          </div>

          <!-- السعر -->
          <div class="flex flex-column gap-4 mt-4">
            <span
              class="original-price"
              *ngIf="product()?.discountedPrice"
              style="text-decoration: line-through"
            >
              {{ product()?.price | currency : "EGP" }}
            </span>
            <span class="text-2xl font-semibold">
              {{
                product()?.discountedPrice || product()?.price
                  | currency : "EGP"
              }}
            </span>

            <!-- الأزرار -->
            <div class="flex gap-2">
              <p-button
                icon="pi pi-shopping-cart"
                class="flex-auto md:flex-initial white-space-nowrap"
                label="Add to cart"
                (click)="addToCart()"
                #disabled
                [disabled]="(product()?.quantity ?? 0) <= 0"
              >
              </p-button>
              <p-button icon="pi pi-heart" [outlined]="true" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
